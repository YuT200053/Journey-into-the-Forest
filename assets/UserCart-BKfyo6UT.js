import{_ as S,c as i,a as e,e as g,z as b,F as v,q as y,u as C,t as d,b as n,w,d as E,r as x,o as c,x as k,y as q,s as p,A as F}from"./index-RY6-qFNo.js";var L={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"yu-t-200053",BASE_URL:"/Journey-into-the-Forest/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:m,VITE_PATH:_}=L,T={data(){return{carts:{},form:{user:{name:"",email:"",tel:"",address:""},message:""}}},methods:{getCart(){const l=`${m}/api/${_}/cart`;this.axios.get(l).then(s=>{this.carts=s.data.data}).catch(s=>{alert(s.response.data.message)})},deleteCart(l){const s=`${m}/api/${_}/cart/${l}`;this.axios.delete(s).then(r=>{alert(r.data.message),this.getCart()}).catch(r=>{alert(r.response.data.message)})},deleteAll(){const l=`${m}/api/${_}/carts`;this.axios.delete(l).then(s=>{alert(s.data.message),this.getCart()}).catch(s=>{alert(s.response.data.message)})},changeQty(l,s){const r={product_id:l.product_id,qty:s},V=`${m}/api/${_}/cart/${l.id}`;this.axios.put(V,{data:r}).then(t=>{alert(t.data.message),this.getCart()}).catch(t=>{alert(t.response.data.message)})},createOrder(){const l=`${m}/api/${_}/order`,s=this.form;console.log("1"),this.axios.post(l,{data:s}).then(r=>{alert(r.data.message),this.$refs.form.resetForm(),this.getCart(),console.log("2")}).catch(r=>{alert(r.response.data.message)})}},mounted(){this.getCart()}},A=E('<section class="cart-banner img-box mb-4"><div class="container"><div class="cart-banner-title text-center w-100"><h1 class="title mb-0">購物車</h1><span class="english fs-5 title">Cart</span></div></div></section>',1),D={class:"container mb-7"},I={key:0,class:"alert alert-secondary border border-1 text-center",role:"alert"},N=e("i",{class:"bi bi-stars me-1"},null,-1),R={class:"row"},B={class:"col-12 col-lg-8"},M=["onClick"],O=e("i",{class:"bi bi-x-lg"},null,-1),P=[O],z={class:"row gx-2 align-items-center"},H={class:"col-3"},Q=["src","alt"],j={class:"col-5"},J={class:"fs-5"},G=e("br",null,null,-1),K={class:"text-muted fs-7"},W={class:"text-dark-green"},X={class:"col-2"},Y=["onUpdate:modelValue","onChange"],Z=["value"],$={class:"col-2 text-end text-primary"},ee={key:0,class:"d-flex justify-content-between pe-3"},se=e("i",{class:"bi bi-trash3 me-1"},null,-1),te={class:"fs-4 text-danger ls-2"},ae={key:0,class:"col-12 col-lg-4"},oe={class:"product-description p-5"},le=e("div",{class:"mb-3"},[e("h4",{class:"title mb-0"},"購買人資料"),e("span",{class:"english title ls-2 fs-7"},"Purchaser Information")],-1),re={class:"form-floating mb-3"},ne=e("label",{for:"email"},"Email",-1),ie={class:"form-floating mb-3"},ce=e("label",{for:"name"},"收件人姓名",-1),de={class:"form-floating mb-3"},me=e("label",{for:"tel"},"收件人電話",-1),_e={class:"form-floating mb-3"},ue=e("label",{for:"address"},"收件人地址",-1),he={class:"form-floating mb-3"},fe=e("label",{for:"message"},"留言",-1),pe={class:"text-end"},ge=["disabled"],be=e("i",{class:"bi bi-send me-1"},null,-1);function ve(l,s,r,V,t,u){const h=x("VeeField"),f=x("error-message"),U=x("VeeForm");return c(),i(v,null,[A,e("section",D,[t.carts.carts&&!t.carts.carts.length?(c(),i("div",I,[N,g("目前購物車是空的，趕快加入你的漫遊行程吧！ ")])):b("",!0),e("div",R,[e("div",B,[(c(!0),i(v,null,y(t.carts.carts,a=>(c(),i("div",{class:"p-3 mb-2 bg-secondary rounded-3 d-flex border border-1",key:a.id},[e("button",{type:"button",class:"btn ps-0",onClick:C(o=>u.deleteCart(a.id),["prevent"])},P,8,M),e("div",z,[e("div",H,[e("img",{src:a.product.imageUrl,alt:a.product.title,class:"w-100 rounded-3"},null,8,Q)]),e("div",j,[e("span",J,d(a.product.title),1),G,e("del",K," 原 $"+d(a.product.origin_price?a.product.origin_price.toLocaleString("en-US"):""),1),e("span",W," 特價 $"+d(a.product.price?a.product.price.toLocaleString("en-US"):""),1)]),e("div",X,[k(e("select",{class:"form-select form-select-sm","onUpdate:modelValue":o=>a.qty=o,onChange:o=>u.changeQty(a,a.qty)},[(c(),i(v,null,y(10,o=>e("option",{key:o,value:o},d(o)+" 張",9,Z)),64))],40,Y),[[q,a.qty]])]),e("div",$," 小計 $"+d(a.total?a.total.toLocaleString("en-US"):""),1)])]))),128)),t.carts.carts&&t.carts.carts.length?(c(),i("div",ee,[e("button",{type:"button",class:"btn btn-outline-dark-green",onClick:s[0]||(s[0]=C(a=>u.deleteAll(),["prevent"]))},[se,g("清空購物車 ")]),e("div",te," 總計 $"+d(t.carts.total?t.carts.total.toLocaleString("en-US"):""),1)])):b("",!0)]),t.carts.carts&&t.carts.carts.length?(c(),i("div",ae,[e("div",oe,[le,n(U,{onSubmit:s[6]||(s[6]=a=>u.createOrder()),ref:"form"},{default:w(({errors:a})=>[e("div",re,[n(h,{id:"email",name:"email",type:"email",class:p(["form-control",{"is-invalid":a.email}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:t.form.user.email,"onUpdate:modelValue":s[1]||(s[1]=o=>t.form.user.email=o)},null,8,["class","modelValue"]),ne,n(f,{name:"email",class:"invalid-feedback"})]),e("div",ie,[n(h,{id:"name",name:"姓名",type:"name",class:p(["form-control",{"is-invalid":a.姓名}]),placeholder:"請輸入姓名",rules:"required",modelValue:t.form.user.name,"onUpdate:modelValue":s[2]||(s[2]=o=>t.form.user.name=o)},null,8,["class","modelValue"]),ce,n(f,{name:"姓名",class:"invalid-feedback"})]),e("div",de,[n(h,{id:"tel",name:"電話",type:"tel",class:p(["form-control",{"is-invalid":a.電話}]),placeholder:"請輸入電話",rules:"required|min:8||numeric",modelValue:t.form.user.tel,"onUpdate:modelValue":s[3]||(s[3]=o=>t.form.user.tel=o)},null,8,["class","modelValue"]),me,n(f,{name:"電話",class:"invalid-feedback"})]),e("div",_e,[n(h,{id:"address",name:"地址",type:"text",class:p(["form-control",{"is-invalid":a.地址}]),placeholder:"請輸入地址",rules:"required",modelValue:t.form.user.address,"onUpdate:modelValue":s[4]||(s[4]=o=>t.form.user.address=o)},null,8,["class","modelValue"]),ue,n(f,{name:"地址",class:"invalid-feedback"})]),e("div",he,[k(e("textarea",{id:"message",name:"留言",class:"form-control",placeholder:"請輸入留言","onUpdate:modelValue":s[5]||(s[5]=o=>t.form.message=o)},null,512),[[F,t.form.message]]),fe]),e("div",pe,[e("button",{type:"submit",class:"btn btn-primary text-white",disabled:t.carts.carts?t.carts.carts.final_total:""===0},[be,g("送出訂單 ")],8,ge)])]),_:1},512)])])):b("",!0)])])],64)}const Ve=S(T,[["render",ve]]);export{Ve as default};
